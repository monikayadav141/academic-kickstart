did_funding_graph(Male_T4, "DID coefficients - Male Lowest 80th percentile", -3, 15, 2)
did_funding_graph(Male_T5, "DID coefficients - Male Lowest 100th percentile", -3, 20, 2)
library(stringr)
library(tidyverse)
library(haven)
library(estimatr)
library(ggplot2)
library(forcats)
rm(list = ls())
library(stringr)
library(tidyverse)
library(haven)
library(ggplot2)
library(forcats)
rm(list = ls())
setwd("~/Desktop/Columbia/Spring Semester 2020/Stats/Project/Matching_funding_CSVs")
Male_T1 <- read.csv(file = "Male_T1.csv")
Male_T2 <- read.csv(file = "Male_T2.csv")
Male_T3 <- read.csv(file = "Male_T3.csv")
Male_T4 <- read.csv(file = "Male_T4.csv")
Male_T5 <- read.csv(file = "Male_T5.csv")
Female_T1 <- read.csv(file = "Female_T1.csv")
Female_T2 <- read.csv(file = "Female_T2.csv")
Female_T3 <- read.csv(file = "Female_T3.csv")
Female_T4 <- read.csv(file = "Female_T4.csv")
Female_T5 <- read.csv(file = "Female_T5.csv")
match_funding_graph <- function(df, title, ylim_lower = -1, ylim_upper = 6, y_interval = 0.5){
xlabs = c(as.character(2009:2018))
p1 = df %>%
ggplot() +
geom_ribbon(mapping = aes(x = Year, ymin = CI.low, ymax = CI.high),
fill = "black", alpha = 0.2) +
geom_line(mapping = aes(x = Year, y = Coef.)) +
scale_y_continuous(limits = c(ylim_lower,ylim_upper), breaks = seq(ylim_lower,ylim_upper, y_interval), name = "Number of Publications") +
scale_x_continuous(breaks = 2009:2018, labels = xlabs, name = "Year" ) +
ggtitle(title) +
geom_hline(mapping = aes(yintercept = 0), linetype = 6) +
theme_classic() +
theme(panel.grid.major.y = element_line(color = "grey83"))
return(p1)
}
match_funding_graph(Male_T1, "Matching coefficients - Male (Lowest 20th percentile)", -3, 5, 2)
match_funding_graph(Male_T2, "Matching coefficients - Male (20-40%)", -3, 5, 2)
match_funding_graph(Male_T3, "Matching coefficients - Male (40-60%)", -3, 5, 2)
match_funding_graph(Male_T4, "Matching coefficients - Male (60-80%)", -3, 15, 2)
match_funding_graph(Male_T5, "Matching coefficients - Male (80-100%)", -3, 20, 2)
match_funding_graph(Male_T1, "Matching coefficients - Male (Lowest 20th percentile)", -3, 5, 2)
match_funding_graph(Male_T2, "Matching coefficients - Male (20-40%)", -3, 5, 2)
match_funding_graph(Male_T3, "Matching coefficients - Male (40-60%)", -3, 5, 2)
match_funding_graph(Male_T4, "Matching coefficients - Male (60-80%)", -3, 5, 2)
match_funding_graph(Male_T5, "Matching coefficients - Male (80-100%)", -3, 13, 2)
match_funding_graph(Female_T1, "Matching coefficients - Female (Lowest 20th percentile)", -3, 5, 2)
match_funding_graph(Female_T2, "Matching coefficients - Female (20-40%)", -3, 5, 2)
match_funding_graph(Female_T3, "Matching coefficients - Female (40-60%)", -3, 5, 2)
match_funding_graph(Female_T4, "Matching coefficients - Female (60-80%)", -3, 5, 2)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -3, 13, 2)
match_funding_graph(Female_T1, "Matching coefficients - Female (Lowest 20th percentile)", -3, 5, 2)
match_funding_graph(Female_T2, "Matching coefficients - Female (20-40%)", -3, 5, 2)
match_funding_graph(Female_T3, "Matching coefficients - Female (40-60%)", -3, 5, 2)
match_funding_graph(Female_T4, "Matching coefficients - Female (60-80%)", -3, 5, 2)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -5, 13, 2)
match_funding_graph(Female_T1, "Matching coefficients - Female (Lowest 20th percentile)", -3, 5, 2)
match_funding_graph(Female_T2, "Matching coefficients - Female (20-40%)", -3, 5, 2)
match_funding_graph(Female_T3, "Matching coefficients - Female (40-60%)", -3, 5, 2)
match_funding_graph(Female_T4, "Matching coefficients - Female (60-80%)", -3, 5, 2)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -7, 13, 2)
match_funding_graph(Female_T1, "Matching coefficients - Female (Lowest 20th percentile)", -3, 5, 2)
match_funding_graph(Female_T2, "Matching coefficients - Female (20-40%)", -3, 5, 2)
match_funding_graph(Female_T3, "Matching coefficients - Female (40-60%)", -3, 5, 2)
match_funding_graph(Female_T4, "Matching coefficients - Female (60-80%)", -3, 5, 2)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -7, 15, 2)
match_funding_graph(Male_T1, "Matching coefficients - Male (Lowest 20th percentile)", -2, 5, 1)
match_funding_graph(Male_T2, "Matching coefficients - Male (20-40%)", -2, 5, 1)
match_funding_graph(Male_T3, "Matching coefficients - Male (40-60%)", -2, 5, 1)
match_funding_graph(Male_T4, "Matching coefficients - Male (60-80%)", -2, 5, 1)
match_funding_graph(Male_T5, "Matching coefficients - Male (80-100%)", -7, 15, 3)
match_funding_graph(Female_T1, "Matching coefficients - Female (Lowest 20th percentile)", -2, 5, 1)
match_funding_graph(Female_T2, "Matching coefficients - Female (20-40%)", -2, 5, 1)
match_funding_graph(Female_T3, "Matching coefficients - Female (40-60%)", -2, 5, 1)
match_funding_graph(Female_T4, "Matching coefficients - Female (60-80%)", -2, 5, 1)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -7, 15, 3)
match_funding_graph(Male_T5, "Matching coefficients - Male (80-100%)", -7, 15, 3)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -7, 15, 3)
#Males
match_funding_graph(Male_T1, "Matching coefficients - Male (Lowest 20th percentile)", -2, 5, 1)
match_funding_graph(Male_T2, "Matching coefficients - Male (20-40%)", -2, 5, 1)
match_funding_graph(Male_T3, "Matching coefficients - Male (40-60%)", -2, 5, 1)
match_funding_graph(Male_T4, "Matching coefficients - Male (60-80%)", -2, 5, 1)
match_funding_graph(Male_T5, "Matching coefficients - Male (80-100%)", -7, 15, 3)
match_funding_graph(Female_T1, "Matching coefficients - Female (Lowest 20th percentile)", -2, 5, 1)
match_funding_graph(Female_T2, "Matching coefficients - Female (20-40%)", -2, 5, 1)
match_funding_graph(Female_T3, "Matching coefficients - Female (40-60%)", -2, 5, 1)
match_funding_graph(Female_T4, "Matching coefficients - Female (60-80%)", -2, 5, 1)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -7, 15, 3)
match_funding_graph(Female_T1, "Matching coefficients - Female (Lowest 20th percentile)", -2, 5, 1)
match_funding_graph(Female_T2, "Matching coefficients - Female (20-40%)", -2, 5, 1)
match_funding_graph(Female_T3, "Matching coefficients - Female (40-60%)", -2, 5, 1)
match_funding_graph(Female_T4, "Matching coefficients - Female (60-80%)", -2, 5, 1)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -7, 14, 3)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -8, 14, 3)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -8, 14, 2)
match_funding_graph(Male_T5, "Matching coefficients - Male (80-100%)", -7, 13, 2)
match_funding_graph(Male_T5, "Matching coefficients - Male (80-100%)", -8, 14, 2)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -6, 14, 2)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -8, 14, 2)
match_funding_graph(Male_T5, "Matching coefficients - Male (80-100%)", -8, 14, 2)
match_funding_graph(Male_T5, "Matching coefficients - Male (80-100%)", -8, 14, 2)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -8, 14, 2)
match_funding_graph(Male_T5, "Matching coefficients - Male (80-100%)", -9, 14, 3)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -9, 14, 3)
match_funding_graph(Male_T5, "Matching coefficients - Male (80-100%)", -9, 14, 3)
match_funding_graph(Male_T1, "Matching coefficients - Male (Lowest 20th percentile)", -2, 5, 1)
match_funding_graph(Male_T2, "Matching coefficients - Male (20-40%)", -2, 5, 1)
match_funding_graph(Male_T3, "Matching coefficients - Male (40-60%)", -2, 5, 1)
match_funding_graph(Male_T4, "Matching coefficients - Male (60-80%)", -2, 5, 1)
match_funding_graph(Male_T5, "Matching coefficients - Male (80-100%)", -9, 14, 3)
match_funding_graph(Female_T1, "Matching coefficients - Female (Lowest 20th percentile)", -2, 5, 1)
match_funding_graph(Female_T2, "Matching coefficients - Female (20-40%)", -2, 5, 1)
match_funding_graph(Female_T3, "Matching coefficients - Female (40-60%)", -2, 5, 1)
match_funding_graph(Female_T4, "Matching coefficients - Female (60-80%)", -2, 5, 1)
match_funding_graph(Female_T5, "Matching coefficients - Female (80-100%)", -9, 14, 3)
library(stringr)
library(tidyverse)
library(haven)
library(ggplot2)
library(forcats)
rm(list = ls())
setwd("~/Desktop/Columbia/Spring Semester 2020/Stats/Project/Diff-in-diff_funding_CSVs")
Male_T1 <- read.csv(file = "Male_T1.csv")
Male_T2 <- read.csv(file = "Male_T2.csv")
Male_T3 <- read.csv(file = "Male_T3.csv")
Male_T4 <- read.csv(file = "Male_T4.csv")
Male_T5 <- read.csv(file = "Male_T5.csv")
Female_T1 <- read.csv(file = "Female_T1.csv")
Female_T2 <- read.csv(file = "Female_T2.csv")
Female_T3 <- read.csv(file = "Female_T3.csv")
Female_T4 <- read.csv(file = "Female_T4.csv")
Female_T5 <- read.csv(file = "Female_T5.csv")
did_funding_graph <- function(df, title, ylim_lower = -1, ylim_upper = 6, y_interval = 0.5){
xlabs = c(as.character(2008:2018))
p1 = df %>%
ggplot() +
geom_ribbon(mapping = aes(x = Year, ymin = CI.low, ymax = CI.high),
fill = "black", alpha = 0.2) +
geom_line(mapping = aes(x = Year, y = Coef.)) +
scale_y_continuous(limits = c(ylim_lower,ylim_upper), breaks = seq(ylim_lower,ylim_upper, y_interval), name = "Number of Publications") +
scale_x_continuous(breaks = 2008:2018, labels = xlabs, name = "Year" ) +
ggtitle(title) +
geom_hline(mapping = aes(yintercept = 0), linetype = 6) +
theme_classic() +
theme(panel.grid.major.y = element_line(color = "grey83"))
return(p1)
}
did_funding_graph(Male_T1, "DID coefficients - Male (Lowest 20th percentile)", -3, 5, 2)
did_funding_graph(Male_T2, "DID coefficients - Male (20-40%)", -3, 5, 2)
did_funding_graph(Male_T3, "DID coefficients - Male (40-60%)", -3, 5, 2)
did_funding_graph(Male_T4, "DID coefficients - Male (60-80%)", -3, 15, 2)
did_funding_graph(Male_T5, "DID coefficients - Male (80-100%)", -3, 20, 2)
did_funding_graph(Male_T1, "DID coefficients - Male (Lowest 20th percentile)", -3, 5, 1)
did_funding_graph(Male_T2, "DID coefficients - Male (20-40%)", -3, 5, 1)
did_funding_graph(Male_T3, "DID coefficients - Male (40-60%)", -3, 5, 1)
did_funding_graph(Male_T4, "DID coefficients - Male (60-80%)", -3, 15, 3)
did_funding_graph(Male_T5, "DID coefficients - Male (80-100%)", -3, 20, 3)
did_funding_graph(Female_T1, "DID coefficients - Female (Lowest 20th percentile)", -3, 5, 1)
did_funding_graph(Female_T2, "DID coefficients - Female (20-40%)", -3, 5, 1)
did_funding_graph(Female_T3, "DID coefficients - Female (40-60%)", -3, 5, 1)
did_funding_graph(Female_T4, "DID coefficients - Female (60-80%)", -3, 15, 3)
did_funding_graph(Female_T5, "DID coefficients - Female (80-100%)", -3, 20, 3)
did_funding_graph(Male_T1, "DID coefficients - Male (Lowest 20th percentile)", -2, 5, 1)
did_funding_graph(Male_T2, "DID coefficients - Male (20-40%)", -2, 5, 1)
did_funding_graph(Male_T3, "DID coefficients - Male (40-60%)", -2, 5, 1)
did_funding_graph(Male_T4, "DID coefficients - Male (60-80%)", -3, 15, 3)
did_funding_graph(Male_T5, "DID coefficients - Male (80-100%)", -3, 20, 3)
did_funding_graph(Female_T1, "DID coefficients - Female (Lowest 20th percentile)", -2, 5, 1)
did_funding_graph(Female_T2, "DID coefficients - Female (20-40%)", -2, 5, 1)
did_funding_graph(Female_T3, "DID coefficients - Female (40-60%)", -2, 5, 1)
did_funding_graph(Female_T4, "DID coefficients - Female (60-80%)", -3, 15, 3)
did_funding_graph(Female_T5, "DID coefficients - Female (80-100%)", -3, 20, 3)
did_funding_graph(Male_T1, "DID coefficients - Male (Lowest 20th percentile)", -2, 5, 1)
did_funding_graph(Male_T2, "DID coefficients - Male (20-40%)", -2, 5, 1)
did_funding_graph(Male_T3, "DID coefficients - Male (40-60%)", -2, 5, 1)
did_funding_graph(Male_T4, "DID coefficients - Male (60-80%)", -2, 15, 3)
did_funding_graph(Male_T5, "DID coefficients - Male (80-100%)", -3, 20, 3)
did_funding_graph(Female_T1, "DID coefficients - Female (Lowest 20th percentile)", -2, 5, 1)
did_funding_graph(Female_T2, "DID coefficients - Female (20-40%)", -2, 5, 1)
did_funding_graph(Female_T3, "DID coefficients - Female (40-60%)", -2, 5, 1)
did_funding_graph(Female_T4, "DID coefficients - Female (60-80%)", -2, 15, 3)
did_funding_graph(Female_T5, "DID coefficients - Female (80-100%)", -3, 20, 3)
did_funding_graph(Female_T1, "DID coefficients - Female (Lowest 20th percentile)", -2, 5, 1)
did_funding_graph(Female_T2, "DID coefficients - Female (20-40%)", -2, 5, 1)
did_funding_graph(Female_T3, "DID coefficients - Female (40-60%)", -2, 5, 1)
did_funding_graph(Female_T4, "DID coefficients - Female (60-80%)", -3, 15, 3)
did_funding_graph(Female_T5, "DID coefficients - Female (80-100%)", -3, 20, 3)
did_funding_graph(Male_T5, "DID coefficients - Male (80-100%)", -3, 20, 3)
did_funding_graph(Female_T5, "DID coefficients - Female (80-100%)", -3, 20, 3)
did_funding_graph(Female_T4, "DID coefficients - Female (60-80%)", -3, 15, 3)
did_funding_graph(Male_T4, "DID coefficients - Male (60-80%)", -3, 15, 3)
did_funding_graph(Female_T4, "DID coefficients - Female (60-80%)", -3, 15, 3)
did_funding_graph(Male_T4, "DID coefficients - Male (60-80%)", -3, 12, 3)
did_funding_graph(Female_T4, "DID coefficients - Female (60-80%)", -3, 12, 3)
did_funding_graph(Male_T4, "DID coefficients - Male (60-80%)", -3, 12, 3)
did_funding_graph(Male_T5, "DID coefficients - Male (80-100%)", -3, 20, 3)
did_funding_graph(Female_T5, "DID coefficients - Female (80-100%)", -3, 20, 3)
did_funding_graph(Female_T4, "DID coefficients - Female (60-80%)", -3, 12, 3)
did_funding_graph(Female_T4, "DID coefficients - Female (60-80%)", -3, 15, 3)
did_funding_graph(Male_T1, "DID coefficients - Male (Lowest 20th percentile)", -2, 5, 1)
did_funding_graph(Male_T2, "DID coefficients - Male (20-40%)", -2, 5, 1)
did_funding_graph(Male_T3, "DID coefficients - Male (40-60%)", -2, 5, 1)
did_funding_graph(Male_T4, "DID coefficients - Male (60-80%)", -3, 12, 3)
did_funding_graph(Male_T5, "DID coefficients - Male (80-100%)", -3, 20, 3)
#Females
did_funding_graph(Female_T1, "DID coefficients - Female (Lowest 20th percentile)", -2, 5, 1)
did_funding_graph(Female_T2, "DID coefficients - Female (20-40%)", -2, 5, 1)
did_funding_graph(Female_T3, "DID coefficients - Female (40-60%)", -2, 5, 1)
did_funding_graph(Female_T4, "DID coefficients - Female (60-80%)", -3, 12, 3)
did_funding_graph(Female_T5, "DID coefficients - Female (80-100%)", -3, 20, 3)
library(haven)
child_econ_merged <- read_dta("Documents/ViaX/CFPS/CFPS2016/child_econ_merged.dta")
View(child_econ_merged)
summary(wb202)
summary((child_econ_merged$wb202))
str((child_econ_merged$wb202))
str((child_econ_merged$ps4_b_1))
library(haven)
ecfs_child2016 <- read_dta("Documents/ViaX/CFPS/CFPS2016/ecfps2016child_201906.dta")
View(ecfs_child2016)
library(haven)
cfps2016_famecon <- read_dta("Documents/ViaX/CFPS/CFPS2016/ecfps2016famecon_201807.dta")
View(cfps2016_famecon)
library(haven)
cfps2016_child <- read_dta("Documents/ViaX/CFPS/CFPS2016/ecfps2016child_201906.dta")
View(cfps2016_child)
View(ecfs_child2016)
rm(ecfs_child2016)
library(haven)
cfps2016_adult <- read_dta("Documents/ViaX/CFPS/CFPS2016/ecfps2016adult_201906.dta")
View(cfps2016_adult)
desc(cfps2016_child$cfps2016eduy)
describe(cfps2016_child$cfps2016eduy)
str(cfps2016_child$cfps2016eduy)
View(cfps2016_famecon)
ls()
ls(cfps2016_child)
summary(cfps2016_adult$cfps_age)
View(cfps2016_child)
library(haven)
cfps2016_famcomp <- read_dta("Documents/ViaX/CFPS/CFPS2016/ecfps2016famconf_201804.dta")
View(cfps2016_famcomp)
total <- merge(child_econ_merged,cfps2016_famcomp,by="pid")
View(total)
View(cfps2016_adult)
help(full_join)
help("full_join")
library(tidyverse)
help("full_join")
x = child_econ_merged %>%
full_join(cfps2016_adult , by = c("pid_f" = "pid"))
View(x)
x = child_econ_merged %>%
left_join(cfps2016_adult , by = c("pid_f" = "pid"))
rm(x)
x = child_econ_merged %>%
left_join(cfps2016_adult , by = c("pid_f" = "pid"))
View(x)
View(cfps2016_adult)
p <- cfps2016_adult["pid", "cfps2016eduy"]
View(p)
p <- cfps2016_adult["211272102", "cfps2016eduy"]
View(p)
mother = x %>%
left_join(cfps2016_adult , by = c("pid_m" = "pid"))
View(mother)
save(mother, file = "mother.dta")
require(foreign)
write.dta(mother, "mother.dta")
install.packages("foreign")
install.packages("foreign")
install.packages("haven")
install.packages("haven")
write_dta(mother, "mother.dta")
library(haven)
write_dta(mother, "mother.dta")
View(cfps2016_famecon)
rm(list=ls())
library(haven)
X2014a <- read_dta("Documents/ViaX/CFPS/Final/2014_child_econ_father_mother.dta")
View(X2014a)
cronbach.alpha(X2014a$wv102, X2014a$wv103)
library(psych)
alpha(X2014a$wv102, X2014a$wv103)
new %>% select(X2014a.wv102, X2014a.wv103, X2014a.wv104, X2014a.wv105)
library(tidyverse)
new %>% select(X2014a.wv102, X2014a.wv103, X2014a.wv104, X2014a.wv105)
library(dplyr)
new %>% select(X2014a.wv102, X2014a.wv103, X2014a.wv104, X2014a.wv105)
new <- X2014a %>% select(wv102, wv103, wv104, wv105)
View(X2014a)
View(new)
new <- X2014a %>% select(child_id, child_age, wv101, wv102, wv103, wv104, wv105, wv106, wv107, wv108)
View(new)
new<-new[!(new$wv101==-8,]
new<-new[!(new$wv101==-8),]
View(new)
new1 <- new %>% select(wv101, wv102, wv103, wv104, wv105, wv106, wv107, wv108)
alpha(new1)
library(psych)
View(new1)
alpha(new1)
new1[complete.cases(new1), ]
new1<- new1[complete.cases(new1), ]
alpha(new1)
library(stringr)
library(tidyverse)
library(haven)
library(ggplot2)
library(forcats)
rm(list = ls())
library(stringr)
library(tidyverse)
library(dplyr)
library(haven)
library(ggplot2)
library(forcats)
rm(list = ls())
setwd("~/Desktop/Columbia/Spring Semester 2020/Stats/Project/DID_Matching_funding_July27_CSVs")
library(stringr)
library(dplyr)
library(haven)
library(estimatr)
library(ggplot2)
library(forcats)
rm(list = ls())
arra <- read_dta("~/Desktop/Columbia/Spring Semester 2020/Stats/Project/Data/ARRA Merged for Diff-in-diff model.dta")
arra_reg <- function(sample, ref_year = FALSE){
d = arra %>%
filter(sample == 1) %>%
filter(pub_year > 2006)
# Relable variables for proper ommitted category
d$c_arra_i = as.factor(d$c_arra_i)
d$c_arra_i = factor(d$c_arra_i, levels = c(2,1), labels = c("Only non-ARRA", "Both ARRA & non-ARRA"))
# Recode omitted year category
d$pub_year_factor = as.factor(d$pub_year)
if (ref_year){
d$pub_year_factor = fct_relevel(d$pub_year_factor, c("2008"))
}
omit_year = as.numeric(levels(d$pub_year_factor)[1])
r = lm(pub ~ c_arra_i*pub_year_factor + ln_c_cost_nonarra + ln_c_cost_nonarra_lag1 + ln_c_cost_nonarra_lag2, data = d)
coefs = r$coefficients
se = sqrt(diag(vcov(r)))
ind = numeric()
years = numeric()
for (year in 2007:2018){
name = str_c("c_arra_iBoth ARRA & non-ARRA:pub_year_factor", year)
x = str_which(names(coefs), name)
if(length(x) > 0)
years = c(years, year)
ind = c(ind, x)
}
coefs = coefs[ind]
se = se[ind]
data_to_plot = data.frame(coefs, se, years) %>%
mutate(lb = coefs - 1.96*se,
ub = coefs + 1.96*se) %>%
rbind(data.frame(years = omit_year, coefs = 0, lb = 0, ub = 0, se = 0)) %>%
arrange(years)
return(data_to_plot)
}
df_sample_base_t <- arra_reg(arra$sample_base, TRUE)
View(df_sample_base_t)
library(stringr)
library(tidyverse)
library(dplyr)
library(haven)
library(ggplot2)
library(forcats)
rm(list = ls())
setwd("~/Desktop/Columbia/Spring Semester 2020/Stats/Project/DID_Matching_funding_July27_CSVs")
base <- read.csv(file = "base_DID.csv")
View(base)
did_funding_graph <- function(df, title, ylim_lower = -1, ylim_upper = 6, y_interval = 0.5){
xlabs = c("  2007 \n (Pre-\n ARRA)",
"  2008 \n (Pre-\n ARRA)",
"  2009 \n (ARRA)", as.character(2010:2018))
p1 = df %>%
ggplot() +
geom_ribbon(mapping = aes(x = Year, ymin = CI.low, ymax = CI.high),
fill = "black", alpha = 0.2) +
geom_line(mapping = aes(x = Year, y = Coef.)) +
scale_y_continuous(limits = c(ylim_lower,ylim_upper), breaks = seq(ylim_lower,ylim_upper, y_interval), name = "Number of Publications") +
scale_x_continuous(breaks = 2008:2018, labels = xlabs, name = "Year" ) +
ggtitle(title) +
geom_vline(mapping = aes(xintercept = 2008), color = "blue", linetype = 6) +
geom_hline(mapping = aes(yintercept = 0), linetype = 6) +
theme_classic() +
theme(panel.grid.major.y = element_line(color = "grey83"))
return(p1)
}
did_funding_graph(base, "DID coefficients - All Projects", -2, 5, 1)
did_funding_graph(base, "DID coefficients - All Projects")
did_funding_graph(base, "DID coefficients - All Projects")
did_funding_graph <- function(df, title, ylim_lower = -1, ylim_upper = 6, y_interval = 0.5){
xlabs = c("  2007 \n (Pre-\n ARRA)",
"  2008 \n (Pre-\n ARRA)",
"  2009 \n (ARRA)", as.character(2010:2018))
p1 = df %>%
ggplot() +
geom_ribbon(mapping = aes(x = Year, ymin = CI.low, ymax = CI.high),
fill = "black", alpha = 0.2) +
geom_line(mapping = aes(x = Year, y = Coef.)) +
scale_y_continuous(limits = c(ylim_lower,ylim_upper), breaks = seq(ylim_lower,ylim_upper, y_interval), name = "Number of Publications") +
scale_x_continuous(breaks = 2007:2018, labels = xlabs, name = "Year" ) +
ggtitle(title) +
geom_vline(mapping = aes(xintercept = 2008), color = "blue", linetype = 6) +
geom_hline(mapping = aes(yintercept = 0), linetype = 6) +
theme_classic() +
theme(panel.grid.major.y = element_line(color = "grey83"))
return(p1)
}
did_funding_graph(base, "DID coefficients - All Projects")
did_funding_graph(base, "DID coefficients - All Projects", -1, 4, 1)
did_funding_graph(base, "DID coefficients - All Projects", -1, 4, 0.5)
male <- read.csv(file = "male_DID.csv")
setwd("~/Desktop/Columbia/Spring Semester 2020/Stats/Project/DID_Matching_funding_July27_CSVs")
base <- read.csv(file = "base_DID.csv")
male <- read.csv(file = "male_DID.csv")
female <- read.csv(file = "female_DID.csv")
did_funding_graph <- function(df, title, ylim_lower = -1, ylim_upper = 6, y_interval = 0.5){
xlabs = c("  2007 \n (Pre-\n ARRA)",
"  2008 \n (Pre-\n ARRA)",
"  2009 \n (ARRA)", as.character(2010:2018))
p1 = df %>%
ggplot() +
geom_ribbon(mapping = aes(x = Year, ymin = CI.low, ymax = CI.high),
fill = "black", alpha = 0.2) +
geom_line(mapping = aes(x = Year, y = Coef.)) +
scale_y_continuous(limits = c(ylim_lower,ylim_upper), breaks = seq(ylim_lower,ylim_upper, y_interval), name = "Number of Publications") +
scale_x_continuous(breaks = 2007:2018, labels = xlabs, name = "Year" ) +
ggtitle(title) +
geom_vline(mapping = aes(xintercept = 2008), color = "blue", linetype = 6) +
geom_hline(mapping = aes(yintercept = 0), linetype = 6) +
theme_classic() +
theme(panel.grid.major.y = element_line(color = "grey83"))
return(p1)
}
did_funding_graph(base, "DID coefficients - All Projects", -1, 4, 1)
did_funding_graph(male, "DID coefficients - Male-PI Projects", -2, 5, 1)
did_funding_graph(female, "DID coefficients - Female-PI Projects", -2, 5, 1)
did_funding_graph(base, "DID coefficients - All Projects", -2, 4, 1)
did_funding_graph(male, "DID coefficients - Male-PI Projects", -2, 4, 1)
did_funding_graph(female, "DID coefficients - Female-PI Projects", -2, 4, 1)
setwd("~/Desktop/Columbia/Spring Semester 2020/Stats/Project/DID_Matching_funding_July27_CSVs")
base_matching <- read.csv(file = "base_matching.csv")
male_matching <- read.csv(file = "male_matching.csv")
female_matching <- read.csv(file = "female_matching.csv")
Male_T1 <- read.csv(file = "Male_T1.csv")
Male_T2 <- read.csv(file = "Male_T2.csv")
Male_T3 <- read.csv(file = "Male_T3.csv")
Male_T4 <- read.csv(file = "Male_T4.csv")
Male_T5 <- read.csv(file = "Male_T5.csv")
Female_T1 <- read.csv(file = "Female_T1.csv")
Female_T2 <- read.csv(file = "Female_T2.csv")
Female_T3 <- read.csv(file = "Female_T3.csv")
Female_T4 <- read.csv(file = "Female_T4.csv")
Female_T5 <- read.csv(file = "Female_T5.csv")
match_funding_graph <- function(df, title, ylim_lower = -1, ylim_upper = 6, y_interval = 0.5){
xlabs = c(as.character(2009:2018))
p1 = df %>%
ggplot() +
geom_ribbon(mapping = aes(x = Year, ymin = CI.low, ymax = CI.high),
fill = "black", alpha = 0.2) +
geom_line(mapping = aes(x = Year, y = Coef.)) +
scale_y_continuous(limits = c(ylim_lower,ylim_upper), breaks = seq(ylim_lower,ylim_upper, y_interval), name = "Number of Publications") +
scale_x_continuous(breaks = 2009:2018, labels = xlabs, name = "Year" ) +
ggtitle(title) +
geom_hline(mapping = aes(yintercept = 0), linetype = 6) +
theme_classic() +
theme(panel.grid.major.y = element_line(color = "grey83"))
return(p1)
}
match_funding_graph(base_matching, "Matching coefficients - All Projects", -2, 5, 1)
match_funding_graph(male_matching, "Matching coefficients - Male-PI Projects", -2, 5, 1)
match_funding_graph(female_matching, "Matching coefficients - Female-PI Projects", -2, 5, 1)
match_funding_graph(base_matching, "Matching coefficients - All Projects", -1, 5, 1)
match_funding_graph(male_matching, "Matching coefficients - Male-PI Projects", -1, 5, 1)
match_funding_graph(female_matching, "Matching coefficients - Female-PI Projects", -1, 5, 1)
match_funding_graph(Male_T1, "Matching coefficients - Male-PI Projects (ARRA Funding <$100K)", -2, 5, 1)
match_funding_graph(Male_T2, "Matching coefficients - Male-PI Projects (ARRA Funding $100K-200K)", -2, 5, 1)
match_funding_graph(Male_T3, "Matching coefficients - Male-PI Projects (ARRA Funding $200K-350K)", -2, 5, 1)
match_funding_graph(Male_T4, "Matching coefficients - Male-PI Projects (ARRA Funding $350K-600K)", -2, 5, 1)
match_funding_graph(Male_T5, "Matching coefficients - Male-PI Projects (ARRA Funding >$600K)", -9, 14, 3)
match_funding_graph(Male_T1, "Matching coefficients - Male-PI Projects (ARRA Funding <$100K)", -2, 5, 1)
match_funding_graph(Male_T2, "Matching coefficients - Male-PI Projects (ARRA Funding $100K-200K)", -2, 5, 1)
match_funding_graph(Male_T3, "Matching coefficients - Male-PI Projects (ARRA Funding $200K-350K)", -2, 5, 1)
match_funding_graph(Male_T4, "Matching coefficients - Male-PI Projects (ARRA Funding $350K-600K)", -6, 21, 3)
match_funding_graph(Male_T5, "Matching coefficients - Male-PI Projects (ARRA Funding >$600K)", -5, 35, 5)
match_funding_graph(Female_T1, "Matching coefficients - Female-PI Projects (ARRA Funding <$100K)", -2, 5, 1)
match_funding_graph(Female_T2, "Matching coefficients - Female-PI Projects (ARRA Funding $100K-200K)", -2, 5, 1)
match_funding_graph(Female_T3, "Matching coefficients - Female-PI Projects (ARRA Funding $200K-350K)", -2, 5, 1)
match_funding_graph(Female_T4, "Matching coefficients - Female-PI Projects (ARRA Funding $350K-600K)", -6, 21, 3)
match_funding_graph(Female_T5, "Matching coefficients - Female-PI Projects (ARRA Funding >$600K)", -5, 35, 5)
match_funding_graph(Male_T1, "Matching coefficients - Male-PI Projects (ARRA Funding <$100K)", -2, 5, 1)
match_funding_graph(Male_T2, "Matching coefficients - Male-PI Projects (ARRA Funding $100K-200K)", -2, 5, 1)
match_funding_graph(Male_T3, "Matching coefficients - Male-PI Projects (ARRA Funding $200K-350K)", -2, 5, 1)
match_funding_graph(Male_T4, "Matching coefficients - Male-PI Projects (ARRA Funding $350K-600K)", -6, 21, 3)
match_funding_graph(Male_T5, "Matching coefficients - Male-PI Projects (ARRA Funding >$600K)", -5, 35, 5)
match_funding_graph(Female_T1, "Matching coefficients - Female-PI Projects (ARRA Funding <$100K)", -2, 5, 1)
match_funding_graph(Female_T2, "Matching coefficients - Female-PI Projects (ARRA Funding $100K-200K)", -2, 5, 1)
match_funding_graph(Female_T3, "Matching coefficients - Female-PI Projects (ARRA Funding $200K-350K)", -2, 5, 1)
match_funding_graph(Female_T4, "Matching coefficients - Female-PI Projects (ARRA Funding $350K-600K)", -6, 21, 3)
match_funding_graph(Female_T5, "Matching coefficients - Female-PI Projects (ARRA Funding >$600K)", -5, 35, 5)
setwd("~/Desktop/Research Projects/Academic_website/academic-kickstart")
blogdown:::serve_site()
